<div class="container">
  <div class="row">
    <div class="col-md-2">
     <%= render 'public/genres/genres', genres: @genres %>
     <%= render 'public/posts/tag_list', tag_list: @tag_list %>
    </div>

     <div class="col-md-10 p-2">
      <div class="row justify-content-center">

       <% if @posts.present? %>
         <h1 class="main-title mb-2">Sweets (<%= @posts.total_count %>)</h1>
       <% end %>
      </div>
      <p>Sort:
        <%= link_to 'New', posts_path(sort: 'latest'),class: 'btn btn-sm btn-outline-primary mr-2' %>
        <%= link_to 'Old', posts_path(sort: 'oldest'),class: 'btn btn-sm btn-outline-primary mr-2'  %>
        <%= link_to 'Score', posts_path(sort: 'highest_rated'),class: 'btn btn-sm btn-outline-primary mr-2'  %>
        <%= link_to 'Nice', posts_path(sort: 'most_favorites') ,class: 'btn btn-sm btn-outline-primary mr-2' %>
      </p>

        <div class="form-group">
          <form class="d-flex">
            <%= form_with(url: posts_path, method: "get") do %>
             <%= text_field_tag :query, params[:query], placeholder: "Search..."  %>
             <%= submit_tag "Search", class: "btn btn-info p-1" %>
            <% end %>
          </form>
        </div>

        <div class="card-group py-5">
          <% @posts.each do |post| %>

            <div class="col-md-4 mb-2">
              <div class="card h-100 w-100 mx-auto">

               <%= link_to admin_post_path(post.id) do %>
                 <%= image_tag post.get_image(300,300), class:"card-img-top img-fluid " %>
               <% end %>

               <div class="card-body">

               <% if post.favorites.count.positive? %>
                 <i class="fas fa-heart text-danger"> <%= post.favorites.count %></i>
               <% else %>
               ã€€<i class="fa-regular fa-heart"></i>
               <% end %>

               <%= link_to post_reviews_path(post) do %>
                <%= render 'public/reviews/star', post: post %>
              <% end %>
              </div>
             </div>
           </div>
         <% end %>
       </div>


     <%= render 'public/posts/index', posts: @posts %>

     <%= paginate @posts %>

    </div>
  </div>
</div>